<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="totara/feedback360/db" VERSION="20130709" COMMENT="XMLDB file for Moodle totara/feedback360"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="feedback360" COMMENT="360 feedback360 form (recipients - feedback360_RECIPIENT_* bitmask)." NEXT="feedback360_quest_field">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="description"/>
        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="name" NEXT="status"/>
        <FIELD NAME="status" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="description" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="status" NEXT="recipients"/>
        <FIELD NAME="recipients" TYPE="int" LENGTH="8" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="userid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feed_use_fk"/>
        <KEY NAME="feed_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="feed_nam_ix" UNIQUE="false" FIELDS="name"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="feedback360_quest_field" COMMENT="Individual question definitions for each feedback360" PREVIOUS="feedback360" NEXT="feedback360_grp_org">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360id"/>
        <FIELD NAME="feedback360id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360id" NEXT="datatype"/>
        <FIELD NAME="datatype" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="name" NEXT="description"/>
        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="datatype" NEXT="descriptionformat"/>
        <FIELD NAME="descriptionformat" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="description" NEXT="sortorder"/>
        <FIELD NAME="sortorder" TYPE="int" LENGTH="2" NOTNULL="true" SEQUENCE="false" PREVIOUS="descriptionformat" NEXT="required"/>
        <FIELD NAME="required" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="sortorder" NEXT="defaultdata"/>
        <FIELD NAME="defaultdata" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="required" NEXT="defaultdataformat"/>
        <FIELD NAME="defaultdataformat" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="defaultdata" NEXT="param1"/>
        <FIELD NAME="param1" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="defaultdataformat" NEXT="param2"/>
        <FIELD NAME="param2" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param1" NEXT="param3"/>
        <FIELD NAME="param3" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param2" NEXT="param4"/>
        <FIELD NAME="param4" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param3" NEXT="param5"/>
        <FIELD NAME="param5" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param4"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedquesfiel_fee_fk"/>
        <KEY NAME="feedquesfiel_fee_fk" TYPE="foreign" FIELDS="feedback360id" REFTABLE="feedback360" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="feedquesfiel_nam_ix" UNIQUE="false" FIELDS="name" NEXT="feequesfiel_sor_ix"/>
        <INDEX NAME="feequesfiel_sor_ix" UNIQUE="false" FIELDS="sortorder" PREVIOUS="feedquesfiel_nam_ix"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="feedback360_grp_org" COMMENT="Organisations assigned to feedback360" PREVIOUS="feedback360_quest_field" NEXT="feedback360_grp_pos">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360id"/>
        <FIELD NAME="feedback360id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="orgid"/>
        <FIELD NAME="orgid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360id" NEXT="includechildren"/>
        <FIELD NAME="includechildren" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="orgid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedgrporg_fee_fk"/>
        <KEY NAME="feedgrporg_fee_fk" TYPE="foreign" FIELDS="feedback360id" REFTABLE="feedback360" REFFIELDS="id" PREVIOUS="primary" NEXT="feedgrporg_org_fk"/>
        <KEY NAME="feedgrporg_org_fk" TYPE="foreign" FIELDS="orgid" REFTABLE="org" REFFIELDS="id" PREVIOUS="feedgrporg_fee_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_grp_pos" COMMENT="Positions assigned to feedback360" PREVIOUS="feedback360_grp_org" NEXT="feedback360_grp_cohort">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360id"/>
        <FIELD NAME="feedback360id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="posid"/>
        <FIELD NAME="posid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360id" NEXT="includechildren"/>
        <FIELD NAME="includechildren" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="posid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedgrppos_fee_fk"/>
        <KEY NAME="feedgrppos_fee_fk" TYPE="foreign" FIELDS="feedback360id" REFTABLE="feedback360" REFFIELDS="id" PREVIOUS="primary" NEXT="feedgrppos_pos_fk"/>
        <KEY NAME="feedgrppos_pos_fk" TYPE="foreign" FIELDS="posid" REFTABLE="pos" REFFIELDS="id" PREVIOUS="feedgrppos_fee_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_grp_cohort" COMMENT="Audiences assigned to feedback360" PREVIOUS="feedback360_grp_pos" NEXT="feedback360_user_assignment">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360id"/>
        <FIELD NAME="feedback360id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="cohortid"/>
        <FIELD NAME="cohortid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360id"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedgrpcoho_fee_fk"/>
        <KEY NAME="feedgrpcoho_fee_fk" TYPE="foreign" FIELDS="feedback360id" REFTABLE="feedback360" REFFIELDS="id" PREVIOUS="primary" NEXT="feedgrpcoho_coh_fk"/>
        <KEY NAME="feedgrpcoho_coh_fk" TYPE="foreign" FIELDS="cohortid" REFTABLE="cohort" REFFIELDS="id" PREVIOUS="feedgrpcoho_fee_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_user_assignment" COMMENT="Actual user who is subject of feedback360" PREVIOUS="feedback360_grp_cohort" NEXT="feedback360_resp_assignment">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360id"/>
        <FIELD NAME="feedback360id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360id" NEXT="assignedvia"/>
        <FIELD NAME="assignedvia" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="userid" NEXT="timedue"/>
        <FIELD NAME="timedue" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="assignedvia"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feeduserassi_use_fk"/>
        <KEY NAME="feeduserassi_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="feeduserassi_fee_fk"/>
        <KEY NAME="feeduserassi_fee_fk" TYPE="foreign" FIELDS="feedback360id" REFTABLE="feedback360" REFFIELDS="id" PREVIOUS="feeduserassi_use_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_resp_assignment" COMMENT="feedback360 responders assignments" PREVIOUS="feedback360_user_assignment" NEXT="feedback360_email_assignment">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360userassignmentid"/>
        <FIELD NAME="feedback360userassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360userassignmentid" NEXT="timeassigned"/>
        <FIELD NAME="timeassigned" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid" NEXT="timecompleted"/>
        <FIELD NAME="timecompleted" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="timeassigned" NEXT="viewed"/>
        <FIELD NAME="viewed" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="timecompleted" NEXT="feedback360emailassignmentid"/>
        <FIELD NAME="feedback360emailassignmentid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="Email assignments" PREVIOUS="viewed"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedrespassi_use_fk"/>
        <KEY NAME="feedrespassi_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="feedrespassi_fee_fk"/>
        <KEY NAME="feedrespassi_fee_fk" TYPE="foreign" FIELDS="feedback360userassignmentid" REFTABLE="feedback360_user_assignment" REFFIELDS="id" PREVIOUS="feedrespassi_use_fk" NEXT="feedrespassi_ema_fk"/>
        <KEY NAME="feedrespassi_ema_fk" TYPE="foreign" FIELDS="feedback360emailassignmentid" REFTABLE="feedback360_email_assignment" REFFIELDS="id" PREVIOUS="feedrespassi_fee_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_email_assignment" COMMENT="Email addresses for feedback360" PREVIOUS="feedback360_resp_assignment" NEXT="feedback360_scale">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="email"/>
        <FIELD NAME="email" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="token"/>
        <FIELD NAME="token" TYPE="char" LENGTH="40" NOTNULL="true" SEQUENCE="false" PREVIOUS="email"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_scale" COMMENT="Multiple choice sets" PREVIOUS="feedback360_email_assignment" NEXT="feedback360_scale_value">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360questfieldid"/>
        <FIELD NAME="feedback360questfieldid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="feedback360questfieldid" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="name" NEXT="scaletype"/>
        <FIELD NAME="scaletype" TYPE="int" LENGTH="2" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedscal_use_fk"/>
        <KEY NAME="feedscal_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="feedscal_fee_fk"/>
        <KEY NAME="feedscal_fee_fk" TYPE="foreign" FIELDS="feedback360questfieldid" REFTABLE="feedback360_quest_field" REFFIELDS="id" PREVIOUS="feedscal_use_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="feedscal_scatyp_ix" UNIQUE="false" FIELDS="scaletype"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="feedback360_scale_value" COMMENT="Multiple choice options (score can be used when applicable)" PREVIOUS="feedback360_scale" NEXT="feedback360_scale_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360scaleid"/>
        <FIELD NAME="feedback360scaleid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="feedback360scaleid" NEXT="score"/>
        <FIELD NAME="score" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="name"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedscalvalu_fee_fk"/>
        <KEY NAME="feedscalvalu_fee_fk" TYPE="foreign" FIELDS="feedback360scaleid" REFTABLE="feedback360_scale" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="feedscalvalu_feenamsco_ix" UNIQUE="true" FIELDS="feedback360scaleid, name, score"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="feedback360_scale_data" COMMENT="Multiple user answers" PREVIOUS="feedback360_scale_value" NEXT="feedback360_review_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360scalevalueid"/>
        <FIELD NAME="feedback360scalevalueid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="feedback360respassignmentid"/>
        <FIELD NAME="feedback360respassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360scalevalueid" NEXT="feedback360questfieldid"/>
        <FIELD NAME="feedback360questfieldid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360respassignmentid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedscaldata_sca_fk"/>
        <KEY NAME="feedscaldata_sca_fk" TYPE="foreign" FIELDS="feedback360scalevalueid" REFTABLE="feedback360_scale_value" REFFIELDS="id" PREVIOUS="primary" NEXT="feedscaldata_res_fk"/>
        <KEY NAME="feedscaldata_res_fk" TYPE="foreign" FIELDS="feedback360respassignmentid" REFTABLE="feedback360_resp_assignment" REFFIELDS="id" PREVIOUS="feedscaldata_sca_fk" NEXT="feedscaldata_que_fk"/>
        <KEY NAME="feedscaldata_que_fk" TYPE="foreign" FIELDS="feedback360questfieldid" REFTABLE="feedback360_quest_field" REFFIELDS="id" PREVIOUS="feedscaldata_res_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="feedback360_review_data" COMMENT="Course, objectives, etc reviews in feedback360" PREVIOUS="feedback360_scale_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="feedback360questfieldid"/>
        <FIELD NAME="feedback360questfieldid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="feedback360roleassignmentid"/>
        <FIELD NAME="feedback360roleassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360questfieldid" NEXT="itemid"/>
        <FIELD NAME="itemid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="feedback360roleassignmentid" NEXT="scope"/>
        <FIELD NAME="scope" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="itemid" NEXT="content"/>
        <FIELD NAME="content" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="scope"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="feedreviquesdata_fee_fk"/>
        <KEY NAME="feedreviquesdata_fee_fk" TYPE="foreign" FIELDS="feedback360questfieldid" REFTABLE="feedback360_quest_field" REFFIELDS="id" PREVIOUS="primary" NEXT="feedreviquesdata_rol_fk"/>
        <KEY NAME="feedreviquesdata_rol_fk" TYPE="foreign" FIELDS="feedback360roleassignmentid" REFTABLE="feedback360_role_assignment" REFFIELDS="id" PREVIOUS="feedreviquesdata_fee_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="feedreviquesdata_ite_ix" UNIQUE="false" FIELDS="itemid"/>
      </INDEXES>
    </TABLE>
  </TABLES>
</XMLDB>
