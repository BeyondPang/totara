<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="totara/appraisal/db" VERSION="20130730" COMMENT="XMLDB file for Moodle totara/appraisal"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="appraisal" COMMENT="Main appraisal table" NEXT="appraisal_stage">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="description"/>
        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="name" NEXT="status"/>
        <FIELD NAME="status" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="description" NEXT="timefinished"/>
        <FIELD NAME="timefinished" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="timestamp" PREVIOUS="status" NEXT="timestarted"/>
        <FIELD NAME="timestarted" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="timestamp" PREVIOUS="timefinished"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="appr_nam_ix" UNIQUE="false" FIELDS="name" NEXT="appr_sta_ix"/>
        <INDEX NAME="appr_sta_ix" UNIQUE="false" FIELDS="status" PREVIOUS="appr_nam_ix" NEXT="appr_stamod_ix"/>
        <INDEX NAME="appr_stamod_ix" UNIQUE="false" FIELDS="timefinished" PREVIOUS="appr_sta_ix" NEXT="appr_tim"/>
        <INDEX NAME="appr_tim" UNIQUE="false" FIELDS="timestarted" PREVIOUS="appr_stamod_ix"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_stage" COMMENT="Stages within appraisal" PREVIOUS="appraisal" NEXT="appraisal_stage_page">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid" NEXT="description"/>
        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="name" NEXT="timedue"/>
        <FIELD NAME="timedue" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="description"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprstag_app_fk"/>
        <KEY NAME="apprstag_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprstag_nam_ix" UNIQUE="false" FIELDS="name"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_stage_page" COMMENT="Pages within appraisal stages. Each stage has at least one page" PREVIOUS="appraisal_stage" NEXT="appraisal_scale">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalstageid"/>
        <FIELD NAME="appraisalstageid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalstageid" NEXT="sortorder"/>
        <FIELD NAME="sortorder" TYPE="int" LENGTH="2" NOTNULL="true" SEQUENCE="false" PREVIOUS="name"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprstagpage_app_fk"/>
        <KEY NAME="apprstagpage_app_fk" TYPE="foreign" FIELDS="appraisalstageid" REFTABLE="appraisal_stage" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_scale" COMMENT="Multiple choice sets" PREVIOUS="appraisal_stage_page" NEXT="appraisal_scale_value">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalquestfieldid"/>
        <FIELD NAME="appraisalquestfieldid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalquestfieldid" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="name" NEXT="scaletype"/>
        <FIELD NAME="scaletype" TYPE="int" LENGTH="2" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprscal_use_fk"/>
        <KEY NAME="apprscal_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="apprscal_app_fk"/>
        <KEY NAME="apprscal_app_fk" TYPE="foreign" FIELDS="appraisalquestfieldid" REFTABLE="appraisal_quest_field" REFFIELDS="id" PREVIOUS="apprscal_use_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprscal_scatyp_ix" UNIQUE="false" FIELDS="scaletype"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_scale_value" COMMENT="Multiple choice options (score can be used when applicable)" PREVIOUS="appraisal_scale" NEXT="appraisal_stage_role_setting">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalscaleid"/>
        <FIELD NAME="appraisalscaleid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalscaleid" NEXT="score"/>
        <FIELD NAME="score" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="name"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprscalvalu_app_fk"/>
        <KEY NAME="apprscalvalu_app_fk" TYPE="foreign" FIELDS="appraisalscaleid" REFTABLE="appraisal_scale" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprscalvalu_appnamsco_ix" UNIQUE="true" FIELDS="appraisalscaleid, name, score"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_stage_role_setting" COMMENT="Role access settings for each stage. appraisalrole - APPRAISAL_ROLE_* constant." PREVIOUS="appraisal_scale_value" NEXT="appraisal_quest_field">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalstageid"/>
        <FIELD NAME="appraisalstageid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalrole"/>
        <FIELD NAME="appraisalrole" TYPE="int" LENGTH="3" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalstageid" NEXT="locked"/>
        <FIELD NAME="locked" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="appraisalrole"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprstagrolesett_app_fk"/>
        <KEY NAME="apprstagrolesett_app_fk" TYPE="foreign" FIELDS="appraisalstageid" REFTABLE="appraisal_stage" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprstagrolesett_appapp_ix" UNIQUE="true" FIELDS="appraisalstageid, appraisalrole"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_quest_field" COMMENT="Individual question list for appraisal page" PREVIOUS="appraisal_stage_role_setting" NEXT="appraisal_quest_field_role">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalstagepageid"/>
        <FIELD NAME="appraisalstagepageid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalstagepageid" NEXT="datatype"/>
        <FIELD NAME="datatype" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" PREVIOUS="name" NEXT="description"/>
        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="datatype" NEXT="descriptionformat"/>
        <FIELD NAME="descriptionformat" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="description" NEXT="sortorder"/>
        <FIELD NAME="sortorder" TYPE="int" LENGTH="2" NOTNULL="true" SEQUENCE="false" PREVIOUS="descriptionformat" NEXT="defaultdata"/>
        <FIELD NAME="defaultdata" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="sortorder" NEXT="defaultdataformat"/>
        <FIELD NAME="defaultdataformat" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="defaultdata" NEXT="appraisalscaleid"/>
        <FIELD NAME="appraisalscaleid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="defaultdataformat" NEXT="param1"/>
        <FIELD NAME="param1" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalscaleid" NEXT="param2"/>
        <FIELD NAME="param2" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param1" NEXT="param3"/>
        <FIELD NAME="param3" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param2" NEXT="param4"/>
        <FIELD NAME="param4" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param3" NEXT="param5"/>
        <FIELD NAME="param5" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="param4"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprquesfiel_app_fk"/>
        <KEY NAME="apprquesfiel_app_fk" TYPE="foreign" FIELDS="appraisalstagepageid" REFTABLE="appraisal_stage_page" REFFIELDS="id" PREVIOUS="primary" NEXT="apprquesfiel_appsca_fk"/>
        <KEY NAME="apprquesfiel_appsca_fk" TYPE="foreign" FIELDS="appraisalscaleid" REFTABLE="appraisal_scale" REFFIELDS="id" PREVIOUS="apprquesfiel_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_quest_field_role" COMMENT="Access restrictions for each question. access - APPRAISAL_ACCESS_* constant" PREVIOUS="appraisal_quest_field" NEXT="appraisal_grp_org">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalquestfieldid"/>
        <FIELD NAME="appraisalquestfieldid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalrole"/>
        <FIELD NAME="appraisalrole" TYPE="int" LENGTH="3" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalquestfieldid" NEXT="rights"/>
        <FIELD NAME="rights" TYPE="int" LENGTH="3" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalrole"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprquesfielrole_app_fk"/>
        <KEY NAME="apprquesfielrole_app_fk" TYPE="foreign" FIELDS="appraisalquestfieldid" REFTABLE="appraisal_quest_field" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprquesfielrole_appapp_ix" UNIQUE="true" FIELDS="appraisalquestfieldid, appraisalrole"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_grp_org" COMMENT="Organisations assigned to appraisal" PREVIOUS="appraisal_quest_field_role" NEXT="appraisal_grp_pos">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="orgid"/>
        <FIELD NAME="orgid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid" NEXT="includechildren"/>
        <FIELD NAME="includechildren" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="orgid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprgrporg_app_fk"/>
        <KEY NAME="apprgrporg_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="primary" NEXT="apprgrporg_org_fk"/>
        <KEY NAME="apprgrporg_org_fk" TYPE="foreign" FIELDS="orgid" REFTABLE="org" REFFIELDS="id" PREVIOUS="apprgrporg_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_grp_pos" COMMENT="Positions assigned to appraisal" PREVIOUS="appraisal_grp_org" NEXT="appraisal_grp_cohort">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="posid"/>
        <FIELD NAME="posid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid" NEXT="includechildren"/>
        <FIELD NAME="includechildren" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="posid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprgrppos_app_fk"/>
        <KEY NAME="apprgrppos_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="primary" NEXT="apprgrppos_pos_fk"/>
        <KEY NAME="apprgrppos_pos_fk" TYPE="foreign" FIELDS="posid" REFTABLE="pos" REFFIELDS="id" PREVIOUS="apprgrppos_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_grp_cohort" COMMENT="Audiences assigned to appraisal" PREVIOUS="appraisal_grp_pos" NEXT="appraisal_review_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="cohortid"/>
        <FIELD NAME="cohortid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprgrpcoho_app_fk"/>
        <KEY NAME="apprgrpcoho_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="primary" NEXT="apprgrpcoho_coh_fk"/>
        <KEY NAME="apprgrpcoho_coh_fk" TYPE="foreign" FIELDS="cohortid" REFTABLE="cohort" REFFIELDS="id" PREVIOUS="apprgrpcoho_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_review_data" COMMENT="Course, objectives, etc reviews in appraisal" PREVIOUS="appraisal_grp_cohort" NEXT="appraisal_history">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalquestfieldid"/>
        <FIELD NAME="appraisalquestfieldid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalroleassignmentid"/>
        <FIELD NAME="appraisalroleassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalquestfieldid" NEXT="itemid"/>
        <FIELD NAME="itemid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalroleassignmentid" NEXT="scope"/>
        <FIELD NAME="scope" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false" PREVIOUS="itemid" NEXT="content"/>
        <FIELD NAME="content" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="scope"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprreviquesdata_app_fk"/>
        <KEY NAME="apprreviquesdata_app_fk" TYPE="foreign" FIELDS="appraisalquestfieldid" REFTABLE="appraisal_quest_field" REFFIELDS="id" PREVIOUS="primary" NEXT="apprreviquesdata_rol_fk"/>
        <KEY NAME="apprreviquesdata_rol_fk" TYPE="foreign" FIELDS="appraisalroleassignmentid" REFTABLE="appraisal_role_assignment" REFFIELDS="id" PREVIOUS="apprreviquesdata_app_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprreviquesdata_ite_ix" UNIQUE="false" FIELDS="itemid"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_history" COMMENT="Appraisal access history" PREVIOUS="appraisal_review_data" NEXT="appraisal_user_assignment">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid" NEXT="timecreated"/>
        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprhist_use_fk"/>
        <KEY NAME="apprhist_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="apprhist_app_fk"/>
        <KEY NAME="apprhist_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="apprhist_use_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_user_assignment" COMMENT="Actual user who is subject of appraisal" PREVIOUS="appraisal_history" NEXT="appraisal_role_assignment">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid" NEXT="assignedvia"/>
        <FIELD NAME="assignedvia" TYPE="text" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalid" NEXT="activestageid"/>
        <FIELD NAME="activestageid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="assignedvia" NEXT="timecompleted"/>
        <FIELD NAME="timecompleted" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="activestageid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="appruserassi_use_fk"/>
        <KEY NAME="appruserassi_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="primary" NEXT="appruserassi_app_fk"/>
        <KEY NAME="appruserassi_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="appruserassi_use_fk" NEXT="appruserassi_act_fk"/>
        <KEY NAME="appruserassi_act_fk" TYPE="foreign" FIELDS="activestageid" REFTABLE="appraisal_stage" REFFIELDS="id" PREVIOUS="appruserassi_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_role_assignment" COMMENT="Individual user assignments by their roles" PREVIOUS="appraisal_user_assignment" NEXT="appraisal_stage_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisaluserassignmentid"/>
        <FIELD NAME="appraisaluserassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="userid"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisaluserassignmentid" NEXT="appraisalrole"/>
        <FIELD NAME="appraisalrole" TYPE="int" LENGTH="3" NOTNULL="true" SEQUENCE="false" PREVIOUS="userid" NEXT="activepageid"/>
        <FIELD NAME="activepageid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="appraisalrole"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprroleassi_app_fk"/>
        <KEY NAME="apprroleassi_app_fk" TYPE="foreign" FIELDS="appraisaluserassignmentid" REFTABLE="appraisal_user_assignment" REFFIELDS="id" PREVIOUS="primary" NEXT="apprroleassi_use_fk"/>
        <KEY NAME="apprroleassi_use_fk" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" PREVIOUS="apprroleassi_app_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="apprroleassi_appuserol_ix" UNIQUE="true" FIELDS="appraisaluserassignmentid, userid, appraisalrole"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_stage_data" COMMENT="Appraisal stage completion for each asiignment" PREVIOUS="appraisal_role_assignment" NEXT="appraisal_scale_data">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalroleassignmentid"/>
        <FIELD NAME="appraisalroleassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalstageid"/>
        <FIELD NAME="appraisalstageid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalroleassignmentid" NEXT="timecompleted"/>
        <FIELD NAME="timecompleted" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalstageid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprstagdata_app_fk"/>
        <KEY NAME="apprstagdata_app_fk" TYPE="foreign" FIELDS="appraisalroleassignmentid" REFTABLE="appraisal_role_assignment" REFFIELDS="id" PREVIOUS="primary" NEXT="apprstagdata_appsta_fk"/>
        <KEY NAME="apprstagdata_appsta_fk" TYPE="foreign" FIELDS="appraisalstageid" REFTABLE="appraisal_stage" REFFIELDS="id" PREVIOUS="apprstagdata_app_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_scale_data" COMMENT="Multiple user answers" PREVIOUS="appraisal_stage_data" NEXT="appraisal_event">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalscalevalueid"/>
        <FIELD NAME="appraisalscalevalueid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalroleassignmentid"/>
        <FIELD NAME="appraisalroleassignmentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalscalevalueid" NEXT="appraisalquestfieldid"/>
        <FIELD NAME="appraisalquestfieldid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalroleassignmentid"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprscaldata_sca_fk"/>
        <KEY NAME="apprscaldata_sca_fk" TYPE="foreign" FIELDS="appraisalscalevalueid" REFTABLE="appraisal_scale_value" REFFIELDS="id" PREVIOUS="primary" NEXT="apprscaldata_rol_fk"/>
        <KEY NAME="apprscaldata_rol_fk" TYPE="foreign" FIELDS="appraisalroleassignmentid" REFTABLE="appraisal_role_assignment" REFFIELDS="id" PREVIOUS="apprscaldata_sca_fk" NEXT="apprscaldata_que_fk"/>
        <KEY NAME="apprscaldata_que_fk" TYPE="foreign" FIELDS="appraisalquestfieldid" REFTABLE="appraisal_quest_field" REFFIELDS="id" PREVIOUS="apprscaldata_rol_fk"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_event" COMMENT="Appraisal event notifications" PREVIOUS="appraisal_scale_data" NEXT="appraisal_event_message">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalid"/>
        <FIELD NAME="appraisalid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisalstageid"/>
        <FIELD NAME="appraisalstageid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalid" NEXT="event"/>
        <FIELD NAME="event" TYPE="char" LENGTH="32" NOTNULL="true" SEQUENCE="false" COMMENT="Event name: activation, stage_complete or stage_due" PREVIOUS="appraisalstageid" NEXT="delta"/>
        <FIELD NAME="delta" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Event time delta: + - after event, 0 - immediately, - before event" PREVIOUS="event" NEXT="deltaperiod"/>
        <FIELD NAME="deltaperiod" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Period: 0 - hours (not used), 1 - days, 2 - weeks, 3 - months" PREVIOUS="delta" NEXT="triggered"/>
        <FIELD NAME="triggered" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="deltaperiod" NEXT="stageiscompleted"/>
        <FIELD NAME="stageiscompleted" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" PREVIOUS="triggered" NEXT="timescheduled"/>
        <FIELD NAME="timescheduled" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" PREVIOUS="stageiscompleted"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="appreven_app_fk"/>
        <KEY NAME="appreven_app_fk" TYPE="foreign" FIELDS="appraisalid" REFTABLE="appraisal" REFFIELDS="id" PREVIOUS="primary" NEXT="appreven_sta_fk"/>
        <KEY NAME="appreven_sta_fk" TYPE="foreign" FIELDS="appraisalstageid" REFTABLE="appraisal_stage" REFFIELDS="id" PREVIOUS="appreven_app_fk"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="appreven_eve_ix" UNIQUE="false" FIELDS="event" NEXT="appreven_tim_ix"/>
        <INDEX NAME="appreven_tim_ix" UNIQUE="false" FIELDS="timescheduled" PREVIOUS="appreven_eve_ix"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="appraisal_event_message" COMMENT="Appraisal event message" PREVIOUS="appraisal_event" NEXT="appraisal_event_rcpt">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisaleventid"/>
        <FIELD NAME="appraisaleventid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="name"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="Message title" PREVIOUS="appraisaleventid" NEXT="content"/>
        <FIELD NAME="content" TYPE="text" NOTNULL="true" SEQUENCE="false" PREVIOUS="name"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="appreven_app_fk"/>
        <KEY NAME="appreven_app_fk" TYPE="foreign" FIELDS="appraisaleventid" REFTABLE="appraisal_event" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="appraisal_event_rcpt" COMMENT="Appraisal events recipients (roles)" PREVIOUS="appraisal_event_message">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true" NEXT="appraisalrole"/>
        <FIELD NAME="appraisalrole" TYPE="int" LENGTH="3" NOTNULL="true" SEQUENCE="false" PREVIOUS="id" NEXT="appraisaleventmessageid"/>
        <FIELD NAME="appraisaleventmessageid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" PREVIOUS="appraisalrole"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="apprevenmess_app_fk"/>
        <KEY NAME="apprevenmess_app_fk" TYPE="foreign" FIELDS="appraisaleventmessageid" REFTABLE="appraisal_event_message" REFFIELDS="id" PREVIOUS="primary"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>