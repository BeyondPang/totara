<h1>格式概述</h1>
<p>以下是关于典型 IMS 企业数据文件的基本结构简介。更多信息请访问 <a href="http://www.imsglobal.org/enterprise/">IMS 官方网站</a>。</p>

<p>您可以阅读<a href="./enrol/imsenterprise/entv1p1_conformance_summary.html">一致性摘要</a>，其中描述了此插件可处理的 IMS 数据元素。</p>


<h1>IMS 企业文件格式基本介绍</h1>

<p>对于任何 IMS 形式的注册，您需要：使用 &lt;group&gt; 标签指定课程、使用 &lt;person&gt; 标签指定用户帐号、使用包含 &lt;member&gt; 标签的 &lt;membership&gt; 标签指定用户在课程中的角色。</p><p>
</p>

<p>
请记住，在 Moodle 数据库中使用的数值型关键字不是共用数据（学生数据系统不会提前知道 JOE 是第 20 个添加到 Moodle 数据库的用户），因此它们不是在这种数据类型中被转换的关键字。</p><p>
</p>

<p>
一般来说，课程有参考代码和名称。我们假设它的代码是 MOODLE01。要定义课程，您可以使用：</p><p>
</p>

<p>
&nbsp; &lt;group&gt;<br /> &nbsp; &nbsp; &lt;sourcedid&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;source&gt;MyDataSystem&lt;/source&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;id&gt;MOODLE101&lt;/id&gt;<br /> &nbsp; &nbsp; &lt;/sourcedid&gt;<br /> &nbsp; &nbsp; &lt;description&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;short&gt;Moodle 101&lt;/short&gt;<br /> &nbsp; &nbsp; &lt;/description&gt;<br /> &nbsp; &lt;/group&gt;<br />
</p>

<p>
注册脚本将会寻找代码为 MOODLE101 的课程，如果不存在，则会创建一个这样的课程（可选）。同样地，对于用户而言，我们可假设其代码是&ldquo;jmoodle&rdquo;：</p><p>
</p>

<p>
&nbsp; &lt;person&gt;<br /> &nbsp; &nbsp; &lt;sourcedid&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;source&gt;MyDataSystem&lt;/source&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;id&gt;jmoodle&lt;/id&gt;<br /> &nbsp; &nbsp; &lt;/sourcedid&gt;<br /> &nbsp; &nbsp; &lt;userid&gt;jmoodle&lt;/userid&gt;<br /> &nbsp; &nbsp; &lt;name&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;fn&gt;Joe Moodle&lt;/fn&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;n&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;family&gt;MOODLE&lt;/family&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;given&gt;JOE&lt;/given&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;/n&gt;<br /> &nbsp; &nbsp; &lt;/name&gt;<br /> &nbsp; &lt;/person&gt;<br />
</p>

<p>
如果 JOE 没有帐户，脚本会为他创建一个帐户（可选）。</p>


<p>
现在来看看怎样把一个用户添加到课程中，使其成为该课程的成员：</p><p>
</p>

<p>
&nbsp; &lt;membership&gt;<br /> &nbsp; &nbsp; &lt;sourcedid&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;source&gt;MyDataSystem&lt;/source&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;id&gt;MOODLE101&lt;/id&gt;<br /> &nbsp; &nbsp; &lt;/sourcedid&gt;<br /> &nbsp; &nbsp; &lt;member&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;sourcedid&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;source&gt;MyDataSystem&lt;/source&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;id&gt;jmoodle&lt;/id&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;/sourcedid&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;role roletype=&quot;01&quot;&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;status&gt;1&lt;/status&gt;<br /> &nbsp; &nbsp; &nbsp; &nbsp; &lt;extension&gt;&lt;cohort&gt;unit 2&lt;/cohort&gt;&lt;/extension&gt;<br /> &nbsp; &nbsp; &nbsp; &lt;/role&gt;<br /> &nbsp; &nbsp; &lt;/member&gt;<br /> &nbsp; &lt;/membership&gt;<br />
</p>

<p>
IMS 企业规范提供了一个工具，用于指定注册的开始/结束日期，因此，如果需要，可使用 &lt;timeframe&gt; 标签包含这些信息。</p><p>
</p>

<p>
如果用户已添加到课程组中，脚本将不会对此进行实质上的修改。然而，如果这些用户没有分组，则会应用所指定的分组。</p><p>

