<h1>导入&ldquo;GIFT&rdquo;格式文件</h1>
<p>GIFT 是用于从文本文件导入 Moodle 测验题的最复杂的导入格式。它支持选择题、判断题、简答题、匹配题、数学题及填空题。在一个单独的文本文件中可以混合多种类型的问题，并且这种格式还支持整行注释、问题名称、反馈和百分比权重的打分方法。</p>

<p>文本文件的文本编码必须为 utf-8 格式（除非您只使用 ASCII 字符）。以下是一个问题文本文件的例子：<a href="<?php echo $CFG->wwwroot; ?>/question/format/gift/examples.txt">gift/examples.txt</a>。</p>

<h3>基本概要</h3>

<p>GIFT 文件中的每个单独问题里都不得包含任何空行。但问题之间至少由一个空行划分。如果在您的问题里需要一个空行，可以用实体 <b>\n</b>。您可以在任何地方用注释，但是必须用双斜线 (<b>//</b>) 作为注释行开头。</p>

<h3>问题类型</h3>

<p><u>选择题：</u><br />对于选择题，错误答案以波浪号 (~) 为前缀，正确答案以等号 (=) 为前缀。</p>
<pre>
谁埋在 Grant 的坟墓中？{~Grant ~Jefferson =没有人}
</pre>
<p><b>Missing Word</b> 格式会在句子中自动插入一个填空线（例如：_____）。使用 Missing Word 格式时，答案填写在句子中出现此线的地方。</p>
<pre>
Grant {~埋在 =埋在 ~活着} 在 Grant 的坟墓中。
</pre>
<p>如果答案后接句号，&ldquo;missing wor&rdquo;格式会插入一条填空线。所有类型的问题都可编写为 Missing Word 格式。</p>
<p>必须有一个空行（双回车）来分隔问题。为了清楚表达，答案要分行写，甚至使用缩进格式。例如：</p>
<pre>
美国的感恩节是在十一月的
~第二
~第三
=第四
} 个星期四。

日本文字起源于哪个国家？ {
~印度
=中国
~韩国
~埃及
}
</pre>

<p><u>填空：</u><br />简答题的答案前面都有等号 (=) 前缀，这表明它们都是正确答案。答案中不能包含波浪号。</p>
<pre>
谁埋在 Grant 的坟墓中？{=没有人 =无人}

两加两等于 {=四 =4}。
</pre>
<p>如果简答题只有<u>一个</u>正确的答案，只要不与判断题混淆，可以不加等号前缀。</p>

<p><u>判断题：</u><br />判断题的答案表明命题是对还是错。答案应该写成 {TRUE} 或 {FALSE}，也可以简写成 {T} 或 {F}。</p>
<pre>
Grant 埋葬在 Grant 的坟墓中。{F}

太阳从东方升起。{T}
</pre>

<p><u>匹配题：</u><br />匹配题以一个等号 (=) 开始，用符号&ldquo;-&gt;&rdquo;分隔。且至少包含三个匹配对。</p>
<pre>
匹配题。 {
=子问题1 -&gt; 子答案1
=子问题2 -&gt; 子答案2
=子问题3 -&gt; 子答案3
}

用对应首都匹配以下国家： {
=加拿大 -&gt; 渥太华
=意大利 -&gt; 罗马
=日本 -&gt; 东京
=印度 -&gt; 新德里
}
</pre>
<p>匹配题不支持反馈或答案的百分比权重。</p>

<p><u>数学题：</u><br />数学题的答案部分必须以数字符号 (#) 开始。数字答案可以包括一个误差容限（由冒号隔开，写在正确答案之后）。例如：如果正确答案为 1.5 和 2.5 之间的任何数值，可将其写为 <u>{#2:0.5}</u>。这表明 2 在 0.5 的误差容限内是正确答案（例如：从 1.5 到 2.5 这个范围）。如果没有指定误差容限，则该容差会假定为 0。</p>
<pre>
Ulysses S. Grant 是什么时候出生的？ {#1822}

Pi 的值是多少（三位小数）？ {#3.1415:0.0005}.
</pre>
<p>可选择性的将数字答案按以下格式写为一段数值 {#<i>最小值</i>  <i>最大值</i>}。</p>
<pre>
Pi 的值是多少（三位小数）？ {#3.141..3.142}.
</pre>
<p>Moodle 的浏览器界面不支持多项数学题答案，但是 Moodle 的代码和 GIFT 支持。这种功能可用来指定数值的多重范围，并在结合百分比权重成绩使用时，尤其有用。如果要使用多个答案，这些答案必须由等号分隔，就像简答题一样。</p>
<pre>
Ulysses S. Grant 是什么时候出生的？ {#
    =1822:0
    =%50%1822:2
}
</pre>
<p>注意，因为 Moodle 浏览器 GUI 不支持数学问题的多项答案，那么通过 Moodle 就不能查看和编辑多项答案。改变原来的数字答案的唯一方法是删除或重新导入这个问题（或者使用 phpMyAdmin 之类的其他工具）。</p>

<p><u>论述：</u><br />论述题就是一个简单的问题加上空白的回答区域。花括号之间不能插入任何东西。</p>
<pre>
为 Ulysses S. Grant 写出简短的传记 {}
</pre>

<p><u>描述：</u><br />描述&ldquo;题&rdquo;完全不包括答案部分</p>
<pre>
下一组问题与算术有关
</pre>


<h3>选项</h3>
<p>除这些基本问题类型以外，筛选器还提供以下选项：行注释、问题名称、反馈和百分比答案权重。</p>

<p><u>行注释：</u><br />注释不会被导入到 Moodle ，但可以包含在文本文件中。注释可以用于提供标题或关于问题的更多信息。以双反斜线开始的所有行（不包括制表符和空格）都会被过滤器忽略。</p>
<pre>
// 副标题：下面的数字问题
2 加 2 等于多少？ {#4}
</pre>

<p><u>问题名称：</u><br />您通过将问题名称放入四个冒号之间来指定问题名称。</p>
<pre>
::日本汉字起源::原始的日本字符
来自哪个国家？{=中国}

::感恩节日期::美国的感恩节的庆祝时间是
11 月的 {~第二 ~第三 =第四} 个星期四。
</pre>
<p>如果没有指定问题名称，那么默认情况下整个问题都可作为问题名称。</p>

<p><u>反馈：</u><br />可通过在答案后加一个数学符号&ldquo;#&rdquo;（即井号）和反馈内容将反馈包含在每个问题内。</p>
<pre>
此选择题的答案是什么？ {
~错误答案#错误答案的反馈注释
~其他错误答案#此错误答案的反馈注释
=正确答案#很好！
}
     
谁埋葬在 Grant 的坟墓中？ {
=没有人#完美答案！
=没有人#完美答案！
}
     
Grant 埋葬在 Grant 的坟墓中。{错误#错，没人埋葬在 Grant 的坟墓中。#正确，回答的不错。}</pre>
<p>对于选择题，只有学生选择的答案才会显示反馈。对于简答题，反馈只在学生输入相应的正确答案时显示。对于判断题，可有一个或两个反馈字符串。第一个反馈字符串会在学生错答时显示。第二个会在学生回答正确时显示。</p>

<p><u>百分比答案权重：</u><br />百分比答案权重既可以用于选择题，也可以用于简答题。对于选择题，百分比答案权重可通过为其加上波浪号前缀（选择题）或等号前缀（简答题）而添加，且需将所需百分比放入两个百分号内（例如，%50%）。此选项可以与反馈注释结合使用。</p>
<pre>
难题{~错误答案 ~%50% 半对答案=全对答案}

::Jesus 的家乡::Jesus Christ 来自{
~Jerusalem#这是个重要城市，但是错误答案。
~%25%Bethlehem#他生于此地，但不长于此地。
~%50%Galilee#需要更确切的答案。
=Nazareth#正确答案！回答正确！
}.
     
::Jesus 的家乡::Jesus Christ 来自 {
=Nazareth#正确答案！回答正确！
=%75%Nazereth#正确，但拼写错误。
=%25%Bethlehem#他生于此地，但不长于此地。
}</pre>
<p>注意，最后两个例子本质上是同一个问题，但第一个是选择题而第二个为简答题。</p>

<p><font size="-1">注意，可以指定在浏览器界面中不可用的百分比答案权重。导出页面上的<b>成绩匹配</b>下拉菜单在导入页上会确定这种百分比权重的处理方式。您既可以要求报告错误答案，也可以要求把答案权重调整为最接近有效答案的权重。</font></p>

<p><u>给问题指定文本格式</u><br />仅问题文本可以包含指定的可选文本格式。目前可用的格式有 <b>moodle</b>（Moodle 自动格式）、<b>html</b>（HTML 格式）、<b>plain</b>（Plain 文本格式）以及 <b>markdown</b>（Markdown 格式）。可直接在问题文本前用方括号指定格式。<a href="help.php?file=textformat.html">有关 Moodle 中文本格式的详细信息。</a></p>

<pre>
[markdown] *美国的感恩节*是在十一月的 {
~第二
~第三
=第四
} 个星期四。
</pre>


<p><u>选择题：</u><br /> 多个答案选项用于多选题，要得到满分，必须选择两个或两个以上的答案。通过把部分答案权重赋值于多个答案，激活多个答案选项，同时，选择单个答案将无法获得满分。</p>
<pre>
哪两个人埋在 Grant 的坟墓里？ {
~没人
~%50%Grant
~%50%Grant 的妻子
~Grant 的父亲
}
</pre>
<p>注意，任何答案都没有等号（=），并且答案的权重百分比总和不能超过 100%，否则，Moodle 会返回错误消息。为了避免学生通过选择全部答案而轻松的自动获得满分，最好把错误答案设置为负权重。</p>
<pre>
哪两个人埋在 Grant 的坟墓里？ {
~%-50%没人
~%50%Grant
~%50%Grant 的妻子
~%-50%Grant 的父亲
}
</pre>

<p><u>特殊字符 ~、=、#、{、}、:</u><br />这些符号 <b>(~、=、#、{、}、:)</b> 可控制此筛选器的操作，但不能用作问题中的一般文本。因为这些符号在确定此筛选器的操作中起着特殊作用，因此它们也称为&ldquo;控制符&rdquo;。但是有时候您可能需要用到这种符号，例如，在问题中显示数学公式。解决这种问题的方法是&ldquo;避开&rdquo;这些控制符。您只需在控制符前加一个反斜线 (\)，这样，筛选器便可知道您要将这个控制符用为文字字符而不是控制符使用。例如：</p>
<pre>
哪个答案等于 5？ {
    ~ \= 2 + 2
    = \= 2 + 3
    ~ \= 2 + 4
}

::GIFT 控制符::
以下哪个答案不是 GIFT 导入格式的控制符？ {
~ \~     # \~ 是控制符。
~ \=     # \= 是控制符。
~ \#     # \# 是控制符。
~ \{     # \{ 是控制符。
~ \}     # \} 是控制符。
= \      # 正确！\（反斜杠）不是控制符。但是，
它可用于避免控制符。
}</pre>
<p>当处理这个问题时，反斜线就会移除，且不会保存在 Moodle 中。</p>

<h3>指定类别</h3>

<p>可将类别更改为可在 GIFT 文件中添加问题。可在文件中对类别进行无限次的更改。从本次修改以后到下次修改之前的所有问题或文件的末尾将添加到指定类别。在第一个类别修改者之前，会使用导入屏幕上所指定的类别。注意，要应用此功能，必须在导入屏幕上勾选<b>来自文件：</b>框。</p>

<p>要包括类别修改人，请按如下方式添加一行（在前后插入空行）：

<pre>
$类别：tom/dick/harry
</pre>

或直接

<pre>
$类别：mycategory
</pre>

...第一个例子指定了嵌套类别的路径。这种情况下，问题将进入 <i>harry</i>。如果这些类别不存在，则会创建它们。</p>

<p><u>其他选项：</u><br /> 可通过在以下行中将&ldquo;0&rdquo;变为&ldquo;1&rdquo;来为简答题区分大小写： <br /> <tt>$question-&gt;usecase = 0;  // 忽略大小写</tt></p>
<p></p>

