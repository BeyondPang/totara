<h1>上传用户</h1>

<p>首先，请注意<strong>通常都没有必要大批量上传用户</strong> - 要保持您自己的维护工作顺利进行，首先应当看一下是否有合适的无需手工维护的认证方法，如连接到现有外部数据库或让用户自己创建他们的帐号。请参阅管理菜单中的认证部分。</p>
<p>如果您确定要从文本文件中导入多个用户账户，您需要按以下格式保存您的文本：</p>

<ul>
<li>文件中的每一行都包含一条记录</li>
<li>每条记录都是一系列以逗号分隔的数据</li>
<li>文件的第一条记录很特殊，它包含字段名列表。此记录定义了文件中其他部分的格式。
    <blockquote>
<p><strong>必填字段名：</strong>这些字段必须包含在第一条记录中，并且要为每个用户定义</p>
<p><code class="example1">username, password, firstname, lastname, email</code></p>

<p><strong>默认字段名： </strong>这些是可选的 - 如果并未包含默认字段名，则会使用主管理员的值作为默认值。</p>
<p><code class="example1">institution, department, city, country, lang, auth, timezone</code> </p>
<p><strong>可选字段名:</strong>所有这些字段都是可选的。课程名称是课程的&ldquo;简称&rdquo; - 如果存在，则用户就可以作为学生登录这些课程了。小组名称必须与对应的课程关联，即 course1 对应于 group1 等等。</p>
<p> <code class="example1">idnumber, icq, phone1, phone2, address, url, description, mailformat, maildisplay, htmleditor, autosubscribe, course1, course2, course3, course4, course5, group1, group2, group3, group4, group5, type1, type2, type3, type4, type5, role1, role2, role3, role4, role5, emailstop</code></p>
    </blockquote>
    </li>
<li>数据中的逗号应当编码为 &amp;#44 - 脚本会自动将它们解码为逗号。 </li>
<li>对于布尔字段，用 0 表示 false、1 表示 true。 </li>
<li>类型是用来告诉 Moodle 存在相应课程时用户是学生还是教师（例如 type2 对应于 course2）。1 = 学生、2 = 教师、3 = 助教。如果类型为空或未指定相应课程，则用户的身份默认为学生。 </li>
<li>对于课程，请使用其&ldquo;简称&rdquo;；对于小组，请使用小组名称；对于角色，请使用 ID。</li>
<li>注意：如果用户已经在 Moodle 用户数据库中注册，此脚本将返回该用户的 userid 号(数据库索引)，并会将用户作为学生登录到任何指定的课程，但不会更新其他指定的数据。</li>
</ul>

<p>下例是一个有效的导入文件：</p>
<p><code>username, password, firstname, lastname, email, lang, idnumber, maildisplay, course1, group1, type1<br> jonest, verysecret, Tom, Jones, jonest@someplace.edu, en, 3663737, 1, Intro101, Section 1, 1<br> reznort, somesecret, Trent, Reznor, reznort@someplace.edu, en_us, 6736733, 0, Advanced202, Section 3, 3</code></p>

<h2>更新现有帐户</h2>

<p>默认情况下，Moodle 会假设您将要创建新的用户帐户，并在用户名与现有账户匹配时跳过记录。然而，如果您将&ldquo;更新现有帐户&rdquo;设置为<b>是</b>，则将更新现有用户帐户。 </p>

<p>在更新现有帐户时，您也可以修改用户名。将&ldquo;允许重命名&rdquo;设置为<b>是</b>，并将名为 <font color="#990000" face="Courier New, Courier, mono">oldusername </font> 的字段包含在您的文件中。</p>

<p><b>警告：</b>更新现有帐户时出现任何错误都会严重影响您的用户。使用选项更新时,请务必小心。</p>
